{"version":3,"sources":["../../../src/pathHelper/preload/pathPreload.helper.ts"],"names":[],"mappings":";;;AAGA,IAAM,gBAAA,GAAmB,0BAAA;AACzB,IAAM,YAAA,GAAe,uBAAA;AACrB,IAAM,sBAAA,GAAyB,+BAAA;AAG/B,IAAM,aAAa,MAAuB;AACxC,EAAA,OAAO,WAAA,CAAY,OAAO,gBAAgB,CAAA;AAC5C,CAAA;AAGA,IAAM,OAAA,GAAU,CAAC,IAAA,KAAoC;AACnD,EAAA,OAAO,WAAA,CAAY,MAAA,CAAO,YAAA,EAAc,IAAI,CAAA;AAC9C,CAAA;AAGA,IAAM,kBAAkB,MAAuB;AAC7C,EAAA,OAAO,WAAA,CAAY,OAAO,sBAAsB,CAAA;AAClD,CAAA;AAKA,IAAM,sBAAsB,MAAqB;AAC/C,EAAA,OAAO;AAAA,IACL,YAAY,MAAuB;AACjC,MAAA,OAAO,UAAA,EAAW;AAAA,IACpB,CAAA;AAAA,IACA,OAAA,EAAS,CAAC,IAAA,KAAoC;AAC5C,MAAA,OAAO,QAAQ,IAAI,CAAA;AAAA,IACrB,CAAA;AAAA,IACA,iBAAiB,MAAuB;AACtC,MAAA,OAAO,eAAA,EAAgB;AAAA,IACzB;AAAA,GACF;AACF,CAAA;AAGO,IAAM,aAA4B,mBAAA;AAGzC,IAAI,QAAQ,eAAA,EAAiB;AAC3B,EAAA,IAAI;AACF,IAAA,aAAA,CAAc,iBAAA,CAAkB,cAAc,UAAU,CAAA;AAAA,EAC1D,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,2CAA2C,KAAK,CAAA;AAAA,EAChE;AACF,CAAA,MAAO;AACL,EAAC,WAAmB,UAAA,GAAa,UAAA;AACnC","file":"index.mjs","sourcesContent":["import { contextBridge, ipcRenderer } from 'electron';\nimport type { PathName, PathHelperApi } from '../shared/pathHelper.type';\n\nconst IPC_GET_APP_PATH = '__buff_path_getAppPath__';\nconst IPC_GET_PATH = '__buff_path_getPath__';\nconst IPC_GET_USER_DATA_PATH = '__buff_path_getUserDataPath__';\n\n/** Get the app installation path */\nconst getAppPath = (): Promise<string> => {\n  return ipcRenderer.invoke(IPC_GET_APP_PATH);\n};\n\n/** Get a special directory or file path by name */\nconst getPath = (name: PathName): Promise<string> => {\n  return ipcRenderer.invoke(IPC_GET_PATH, name);\n};\n\n/** Get the user data path */\nconst getUserDataPath = (): Promise<string> => {\n  return ipcRenderer.invoke(IPC_GET_USER_DATA_PATH);\n};\n\n/**\n * Returns a contextBridge-safe object for exposeInMainWorld.\n */\nconst createPathHelperApi = (): PathHelperApi => {\n  return {\n    getAppPath: (): Promise<string> => {\n      return getAppPath();\n    },\n    getPath: (name: PathName): Promise<string> => {\n      return getPath(name);\n    },\n    getUserDataPath: (): Promise<string> => {\n      return getUserDataPath();\n    },\n  };\n};\n\n/** The pathHelper API instance, usable in preload code */\nexport const pathHelper: PathHelperApi = createPathHelperApi();\n\n// Auto-expose pathHelper to window on import\nif (process.contextIsolated) {\n  try {\n    contextBridge.exposeInMainWorld('pathHelper', pathHelper);\n  } catch (error) {\n    console.error('[pathPreload] exposeInMainWorld failed:', error);\n  }\n} else {\n  (globalThis as any).pathHelper = pathHelper;\n}\n"]}