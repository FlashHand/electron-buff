{"version":3,"sources":["../../../src/packageHelper/preload/packagePreload.helper.ts"],"names":["ipcRenderer","contextBridge"],"mappings":";;;;;AAGA,IAAM,oBAAA,GAAuB,6BAAA;AAG7B,IAAM,iBAAiB,MAA4B;AACjD,EAAA,OAAOA,oBAAA,CAAY,OAAO,oBAAoB,CAAA;AAChD,CAAA;AAKA,IAAM,yBAAyB,MAAwB;AACrD,EAAA,OAAO;AAAA,IACL,gBAAgB,MAA4B;AAC1C,MAAA,OAAO,cAAA,EAAe;AAAA,IACxB;AAAA,GACF;AACF,CAAA;AAGO,IAAM,gBAAkC,sBAAA;AAG/C,IAAI,QAAQ,eAAA,EAAiB;AAC3B,EAAA,IAAI;AACF,IAAAC,sBAAA,CAAc,iBAAA,CAAkB,iBAAiB,aAAa,CAAA;AAAA,EAChE,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,8CAA8C,KAAK,CAAA;AAAA,EACnE;AACF,CAAA,MAAO;AACL,EAAC,WAAmB,aAAA,GAAgB,aAAA;AACtC","file":"index.js","sourcesContent":["import { contextBridge, ipcRenderer } from 'electron';\nimport type { PackageInfo, PackageHelperApi } from '../shared/packageHelper.type';\n\nconst IPC_GET_PACKAGE_INFO = '__buff_pkg_getPackageInfo__';\n\n/** Get package.json info (filtered fields only) */\nconst getPackageInfo = (): Promise<PackageInfo> => {\n  return ipcRenderer.invoke(IPC_GET_PACKAGE_INFO);\n};\n\n/**\n * Returns a contextBridge-safe object for exposeInMainWorld.\n */\nconst createPackageHelperApi = (): PackageHelperApi => {\n  return {\n    getPackageInfo: (): Promise<PackageInfo> => {\n      return getPackageInfo();\n    },\n  };\n};\n\n/** The packageHelper API instance, usable in preload code */\nexport const packageHelper: PackageHelperApi = createPackageHelperApi();\n\n// Auto-expose packageHelper to window on import\nif (process.contextIsolated) {\n  try {\n    contextBridge.exposeInMainWorld('packageHelper', packageHelper);\n  } catch (error) {\n    console.error('[packagePreload] exposeInMainWorld failed:', error);\n  }\n} else {\n  (globalThis as any).packageHelper = packageHelper;\n}\n"]}